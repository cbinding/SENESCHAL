
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e;if(f&&e.charAt(0)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return!1}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery)
var usw=(this.usw||{});usw.uri=(usw.uri||{});usw.uri.dcterms={NS:"http://purl.org/dc/terms/"};usw.uri.dcterms={ABSTRACT:usw.uri.dcterms.NS+"abstract",ACCESSRIGHTS:usw.uri.dcterms.NS+"accessRights",ACCRUALMETHOD:usw.uri.dcterms.NS+"accrualMethod",ACCRUALPERIODICITY:usw.uri.dcterms.NS+"accrualPeriodicity",ACCRUALPOLICY:usw.uri.dcterms.NS+"accrualPolicy",ALTERNATIVE:usw.uri.dcterms.NS+"alternative",AUDIENCE:usw.uri.dcterms.NS+"audience",AVAILABLE:usw.uri.dcterms.NS+"available",BIBLIOGRAPHICCITATION:usw.uri.dcterms.NS+"bibliographicCitation",CONFORMSTO:usw.uri.dcterms.NS+"conformsTo",CREATED:usw.uri.dcterms.NS+"created",DATEACCEPTED:usw.uri.dcterms.NS+"dateAccepted",DATECOPYRIGHTED:usw.uri.dcterms.NS+"dateCopyrighted",DATESCHEME:usw.uri.dcterms.NS+"DateScheme",DATESUBMITTED:usw.uri.dcterms.NS+"dateSubmitted",DESCRIPTION:usw.uri.dcterms.NS+"description",EDUCATIONLEVEL:usw.uri.dcterms.NS+"educationLevel",EXTENT:usw.uri.dcterms.NS+"extent",FORMATSCHEME:usw.uri.dcterms.NS+"FormatScheme",HASFORMAT:usw.uri.dcterms.NS+"hasFormat",HASPART:usw.uri.dcterms.NS+"hasPart",HASVERSION:usw.uri.dcterms.NS+"hasVersion",IDENTIFIERSCHEME:usw.uri.dcterms.NS+"IdentifierScheme",INSTRUCTIONALMETHOD:usw.uri.dcterms.NS+"instructionalMethod",ISFORMATOF:usw.uri.dcterms.NS+"isFormatOf",ISPARTOF:usw.uri.dcterms.NS+"isPartOf",ISREFERENCEDBY:usw.uri.dcterms.NS+"isReferencedBy",ISREPLACEDBY:usw.uri.dcterms.NS+"isReplacedBy",ISREQUIREDBY:usw.uri.dcterms.NS+"isRequiredBy",ISSUED:usw.uri.dcterms.NS+"issued",ISVERSIONOF:usw.uri.dcterms.NS+"isVersionOf",LANGUAGESCHEME:usw.uri.dcterms.NS+"LanguageScheme",LICENSE:usw.uri.dcterms.NS+"license",MEDIATOR:usw.uri.dcterms.NS+"mediator",MEDIUM:usw.uri.dcterms.NS+"medium",MODIFIED:usw.uri.dcterms.NS+"modified",PROVENANCE:usw.uri.dcterms.NS+"provenance",REFERENCES:usw.uri.dcterms.NS+"references",RELATIONSCHEME:usw.uri.dcterms.NS+"RelationScheme",REPLACES:usw.uri.dcterms.NS+"replaces",REQUIRES:usw.uri.dcterms.NS+"requires",RIGHTSHOLDER:usw.uri.dcterms.NS+"rightsHolder",SOURCESCHEME:usw.uri.dcterms.NS+"SourceScheme",SPATIAL:usw.uri.dcterms.NS+"spatial",SPATIALSCHEME:usw.uri.dcterms.NS+"SpatialScheme",SUBJECTSCHEME:usw.uri.dcterms.NS+"SubjectScheme",TABLEOFCONTENTS:usw.uri.dcterms.NS+"tableOfContents",TEMPORAL:usw.uri.dcterms.NS+"temporal",TEMPORALSCHEME:usw.uri.dcterms.NS+"TemporalScheme",TITLE:usw.uri.dcterms.NS+"title",TYPESCHEME:usw.uri.dcterms.NS+"TypeScheme",VALID:usw.uri.dcterms.NS+"valid"};var usw=(this.usw||{});usw.uri=(usw.uri||{});usw.uri.skos={NS:"http://www.w3.org/2004/02/skos/core#"};usw.uri.skos={ALTLABEL:usw.uri.skos.NS+"altLabel",ALTSYMBOL:usw.uri.skos.NS+"altSymbol",BROADER:usw.uri.skos.NS+"broader",CHANGENOTE:usw.uri.skos.NS+"changeNote",COLLECTABLEPROPERTY:usw.uri.skos.NS+"CollectableProperty",COLLECTION:usw.uri.skos.NS+"Collection",CONCEPT:usw.uri.skos.NS+"Concept",CONCEPTSCHEME:usw.uri.skos.NS+"ConceptScheme",DEFINITION:usw.uri.skos.NS+"definition",EDITORIALNOTE:usw.uri.skos.NS+"editorialNote",EXAMPLE:usw.uri.skos.NS+"example",HASTOPCONCEPT:usw.uri.skos.NS+"hasTopConcept",HIDDENLABEL:usw.uri.skos.NS+"hiddenLabel",HISTORYNOTE:usw.uri.skos.NS+"historyNote",INSCHEME:usw.uri.skos.NS+"inScheme",ISPRIMARYSUBJECTOF:usw.uri.skos.NS+"isPrimarySubjectOf",ISSUBJECTOF:usw.uri.skos.NS+"isSubjectOf",MEMBER:usw.uri.skos.NS+"member",MEMBERLIST:usw.uri.skos.NS+"memberList",NARROWER:usw.uri.skos.NS+"narrower",NOTE:usw.uri.skos.NS+"note",ORDEREDCOLLECTION:usw.uri.skos.NS+"OrderedCollection",PREFLABEL:usw.uri.skos.NS+"prefLabel",PREFSYMBOL:usw.uri.skos.NS+"prefSymbol",PRIMARYSUBJECT:usw.uri.skos.NS+"primarySubject",RELATED:usw.uri.skos.NS+"related",SCOPENOTE:usw.uri.skos.NS+"scopeNote",SEMANTICRELATION:usw.uri.skos.NS+"semanticRelation",SUBJECT:usw.uri.skos.NS+"subject",SUBJECTINDICATOR:usw.uri.skos.NS+"subjectIndicator",SYMBOL:usw.uri.skos.NS+"symbol"};var usw=this.usw||{};usw.seneschal=(usw.seneschal||{});(function(){"use strict";usw.seneschal.util={radians2degrees:function(radians){return(parseFloat(radians||0)*(180/Math.PI));},degrees2radians:function(degrees){return(parseFloat(degrees||0)*(Math.PI/180));},confine:function(val,min,max){if(val<min){return min;}
if(val>max){return max;}
return val;},isarray:function(value){return value&&typeof value==='object'&&typeof value.length==='number'&&typeof value.splice==='function'&&!(value.propertyIsEnumerable('length'));},include:function(url){var element,head;switch(url.split(".").pop()){case"css":element=document.createElement("link");element.setAttribute("rel","stylesheet");element.setAttribute("type","text/css");element.setAttribute("href",url);break;case"js":element=document.createElement("script");element.setAttribute("language","javascript");element.setAttribute("src",url);break;default:if(window.console){window.console.error("could not identify",url,"skip include");}
return;}
head=document.querySelector("head");if(head.innerHTML.indexOf(element.outerHTML)!==-1){if(window.console){window.console.warn("Duplicate include, skipping: ",url);}}
else{head.appendChild(element);}},random:function(range){return Math.floor(Math.random()*parseInt(range,10));},log:function(txt){var element=document.getElementById('usw-seneschal-util-log'),msg=document.createElement('div');if(!element){element=document.createElement('div');element.setAttribute('id','usw-seneschal-util-log');element.style.border='thin solid gray';element.style.margin='3px';element.style.height='200px';element.style.background='lightyellow';element.style.overflow='scroll';element.appendChild(document.createTextNode('Log'));document.body.appendChild(element);}
msg.style.borderTop='thin solid lightgray';msg.appendChild(document.createTextNode(new Date().toLocaleString()+' '+txt));element.appendChild(msg);}};String.prototype.trim=function(){return(this.replace(/^\s+|\s+$/g,""));};String.prototype.ltrim=function(){return(this.replace(/^\s+/,""));};String.prototype.rtrim=function(){return(this.replace(/\s+$/,""));};Array.prototype.max=function(){return Math.max.apply(Math,this);};Array.prototype.min=function(){return Math.min.apply(Math,this);};}());(function($){"use strict";$.widget("widget.waitable",{options:{waiting:false,img:'img/waiting.gif'},_create:function(options){var self=this,divWaiting;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal-waitable");divWaiting=$("<div class='usw-seneschal-waitable-waiting'></div>").insertAfter(self.element).css({"margin":"0","padding":"0","border":"0","opacity":"0.3","background":"black","display":"none"});$("<img src='"+self.options.img+"'/>").appendTo(divWaiting).css({"margin":"0px","padding":"0px","border":"0px","background":"transparent","width":"16px","height":"16px","display":"none"});$(self.element).resize(function(){self._refresh();});self._refresh();},destroy:function(){this.element.removeClass("usw-seneschal-waitable");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this,imgWaiting,divWaiting;divWaiting=$("div.usw-seneschal-waitable-waiting:first",self.element);if(self.options.waiting===true)
{$(divWaiting).css({"left":$(self.element).position().left,"top":$(self.element).position().top,"width":$(self.element).outerWidth(),"height":$(self.element).outerHeight()}).show();imgWaiting=$("div.usw-seneschal-waitable-waiting:first img:first",self.element);$(imgWaiting).css({"position":"absolute","left":($(divWaiting).outerWidth()/2)-($(imgWaiting).outerWidth()/2),"top":($(divWaiting).outerHeight()/2)-($(imgWaiting).outerHeight()/2)}).show();}
else{$(divWaiting).hide();}}});}(jQuery));(function($){"use strict";$.widget('widget.header',{options:{text:"header",collapsible:false,visible:true},_create:function(options){var self=this,ctlCollapse;self.options=$.extend(self.options,options);self.header=$("<div></div>").addClass("usw-seneschal").addClass("usw-seneschal-header").insertBefore(self.element).css({"width":$(self.element).innerWidth(),"padding-left":"2px","margin-top":$(self.element).css("margin-top"),"margin-left":$(self.element).css("margin-left"),"margin-right":$(self.element).css("margin-right"),"margin-bottom":"0px","height":"25px"});self.element.css({"margin-top":"0px"});$("<span class='usw-seneschal-header-text'>"+self.options.txt+"</span>").css({"margin":"3px","float":"left","color":"ghostwhite"}).appendTo(self.header);ctlCollapse=$("<span class='usw-seneschal-header-ctl'></span>").css({"margin":"3px","float":"right","vertical-align":"middle"}).appendTo(self.header);$("<img class='usw-seneschal-header-ctl-img' src='img/collapse.gif'></img>").appendTo(ctlCollapse);if(self.options.collapsible){$(ctlCollapse).css("display","inline");$(self.header).css("cursor","pointer").click(function(){$(this).next().slideToggle('fast');var x=$(this).next().height(),img=(x<=1?'img/collapse.gif':'img/expand.gif');$(".usw-seneschal-header-ctl-img",self.header).attr("src",img);});}
else{$(ctlCollapse).css("display","none");$(self.header).css("cursor","default");}
self._refresh();},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;$(self.header).width($(self.element).width());if(self.options.text){$(".usw-seneschal-header-text:first",self.header).html(self.options.text);}
if(self.options.visible){$(self.header).show();}
else{$(self.header).hide();}}});}(jQuery));(function($){"use strict";$.widget('widget.footer',{options:{text:"footer",collapsible:false,visible:true},_create:function(options){var self=this;self.options=$.extend(self.options,options);self.footer=$("<div></div>").addClass("usw-seneschal").addClass("usw-seneschal-footer").insertAfter(self.element).css({"width":$(self.element).width(),"margin-top":"0px","margin-left":$(self.element).css("margin-left"),"margin-right":$(self.element).css("margin-right"),"margin-bottom":$(self.element).css("margin-bottom"),"font":$(self.element).css("font"),"padding":"0px","border-top":"0px","height":"25px","cursor":"default"});$(self.element).css({"margin-bottom":"0px"});$("<span class='usw-seneschal-footer-text'>"+self.options.text+"</span>").appendTo(self.footer).css({"margin":"3px","float":"left"});$(self.element).resize(function(){self._refresh();});self._refresh();},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;$(self.footer).width($(self.element).width());$(".usw-seneschal-footer-text:first",self.footer).html(self.options.text);if(self.options.visible){$(self.footer).show();}
else{$(self.footer).hide();}},destroy:function(){var self=this;self.element.removeClass("usw-seneschal-footer");}});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.schemelist",{options:{useCache:true,title:"Concept schemes",serviceURI:"http://www.heritagedata.org/live/services/getSchemes",displayHeader:true},_create:function(options){var self=this;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal").addClass("usw-seneschal-schemelist").waitable({waiting:false}).header({text:self.options.title,visible:self.options.displayHeader});self.schemes=$("<select class='schemes'/>").appendTo(self.element).css({width:$(self.element).innerWidth(),background:self.element.css("background"),color:"dimgray"});$(self.schemes).change(function(){var uri=$(this).val(),label=this.options[this.selectedIndex].text;$(self.element).trigger('selected',{"uri":uri,"label":label});return false;});this._refresh();},destroy:function(){this.element.remove(this.input);this.element.removeClass("usw-seneschal-schemelist");this.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;$(".schemes",self.element).html("");$(self.element).header({visible:self.options.displayHeader});$(self.element).waitable({waiting:true});$.ajax({type:"GET",url:self.options.serviceURI,data:{offset:0,limit:0},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data){var self=this,schemeList={},s,key,scheme,uri,label,attribution,description;data.sort(function(a,b){var lblA=$(a).attr("label"),lblB=$(b).attr("label");if(lblA<lblB){return-1;}
if(lblA>lblB){return 1;}
return 0;});$(data).each(function(obj){uri=$(this).attr("uri");label=$(this).attr("label")===""?uri:$(this).attr("label");attribution=$(this).attr("attribution");description=$(this).attr("description");if(!schemeList[attribution]){schemeList[attribution]={};}
schemeList[attribution][uri]={"label":label,"description":description};});s="";for(key in schemeList)
{if(schemeList.hasOwnProperty(key)){s+="<optgroup label = '"+key+"'>";for(scheme in schemeList[key]){if(schemeList[key].hasOwnProperty(scheme)){s+="<option value='"+scheme+"' title='"+schemeList[key][scheme].description+"'>"+
schemeList[key][scheme].label+"</option>";}}
s+="</optgroup>";}}
$(".schemes",self.element).html(s);uri=$("select",self.element).val();label=$("select option:selected",self.element).html();$(self.element).trigger('selected',{"uri":uri,"label":label});$(self.element).waitable({waiting:false});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;alert("error:"+textStatus+" | "+errorThrown);$(self.element).waitable({waiting:false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({waiting:false});}});$(window).load(function(){$(".usw-seneschal-schemelist").schemelist();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.topconcepts",{options:{useCache:true,schemeURI:"http://purl.org/heritagedata/schemes/mda_obj",title:"Top concepts",serviceURI:"http://www.heritagedata.org/live/services/getTopConceptsForScheme",displayHeader:true,displayFooter:true},_create:function(options){var self=this;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal").addClass("usw-seneschal-topconcepts").waitable({"waiting":false}).header({text:self.options.title,visible:self.options.displayHeader}).footer({text:"",visible:self.options.displayFooter}).css({"max-height":"200px","text-align":"left","overflow-y":"scroll"});self.element.on("click","a",function(){var uri=$(this).attr('href'),label=$(this).text();$(self.element).trigger("selected",{"uri":uri,"label":label});return false;});self.element.on("mouseover","a",function(){var uri=$(this).attr('href');self.element.footer({text:uri});});self.element.on("mouseout","a",function(){self.element.footer({text:""});});self._refresh();},destroy:function(){this.element.remove(this.input);this.element.removeClass("usw-seneschal-topconcepts");this.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.schemeURI===""){return;}
$(self.element).waitable({"waiting":true});$(self.element).html("");$.ajax({type:"GET",url:self.options.serviceURI,data:{schemeURI:self.options.schemeURI,offset:0,limit:0},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});$(self.element).header({visible:self.options.displayHeader});$(self.element).footer({visible:self.options.displayFooter});},updateSuccess:function(data,textStatus,jqXHR){var self=this,list;$(self.element).html("");list=$("<ul/>").appendTo(self.element).css({"list-style-type":"disc","padding-left":"25px",margin:"1px"});data.sort(function(a,b){var lblA=$(a).attr("label"),lblB=$(b).attr("label");if(lblA<lblB){return-1;}
if(lblA>lblB){return 1;}
return 0;});$(data).each(function(obj){var uri=$(this).attr("uri"),label=$(this).attr("label")===""?uri:$(this).attr("label");$("<li><a href='"+uri+"'>"+label+"</a></li>").appendTo(list);});$(self.element).waitable({"waiting":false});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;$().log("updateError",textStatus);$(self.element).waitable({"waiting":false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({"waiting":false});}});$(window).load(function(){$(".usw-seneschal-topconcepts").topconcepts();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget('seneschal.schemedetails',{options:{version:"20140117",serviceURI:"http://www.heritagedata.org/live/services/getResource.php",schemeURI:"http://purl.org/heritagedata/schemes/1",useCache:true},_create:function(options){var self=this;self.options=$.extend(self.options,options);$(self.element).addClass("usw-seneschal");$(self.element).addClass("usw-seneschal-schemedetails");self.element.waitable({"waiting":false});self.element.css({"text-align":"left","overflow-y":"scroll"});$("<div class='title'/>").appendTo(self.element).css({"font-weight":"bold"});$("<div class='description'/>").appendTo(self.element).css({"margin-top":"2px"});self._refresh();},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.schemeURI===""){return;}
$(self.element).waitable({"waiting":true});$.ajax({type:"GET",url:self.options.serviceURI,data:{uri:self.options.schemeURI},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data){var self=this,scheme=data[self.options.schemeURI],titles=[],descriptions=[],property,obj1,key1,obj2,value,lang,s;for(property in scheme){if(scheme.hasOwnProperty(property)){obj1=scheme[property];for(key1 in obj1){if(obj1.hasOwnProperty(key1)){obj2=obj1[key1];if(property===usw.uri.dcterms.TITLE||property===usw.uri.dcterms.DESCRIPTION){value=(obj2.value||"");lang=(obj2.lang||"");s=value+(lang==="en"?"":" ["+lang+"]");switch(property){case usw.uri.dcterms.TITLE:titles.push(s);break;case usw.uri.dcterms.DESCRIPTION:descriptions.push(s);break;}}}}}}
$("div.title:first",self.element).html(titles.join("<br>"));$("div.description:first",self.element).html(descriptions.join("<br>"));$(self.element).waitable({"waiting":false});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;alert("error:"+textStatus+" | "+errorThrown);$(self.results).waitable({"waiting":false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({"waiting":false});}});$(window).load(function(){$(".usw-seneschal-schemedetails").schemedetails();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.schemedetailscomposite",{options:{schemeURI:"http://purl.org/heritagedata/schemes/1",title:"Scheme details",useCache:true,displayHeader:true,displayFooter:true},_create:function(options){var self=this,w,h,main;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal").addClass("usw-seneschal-schemedetailscomposite").header({text:self.options.title,visible:self.options.displayHeader}).footer({text:"",visible:self.options.displayFooter}).css({"min-height":"200px",overflow:"none"});w=$(self.element).innerWidth();h=$(self.element).innerHeight();main=$("<div/>").css({position:"relative",overflow:"none",width:w,height:h}).appendTo(self.element);$("<div class='details'/>").schemedetails({useCache:self.options.useCache}).css({position:"absolute","overflow-y":"scroll",left:(w/100),top:(h/100),width:(w/100)*98,height:(h/100)*48}).appendTo(main);$("<div class='topconcepts'/>").topconcepts({useCache:self.options.useCache}).css({position:"absolute","overflow-y":"scroll",left:(w/100),top:(h/100)*50,width:(w/100)*98,height:(h/100)*48}).appendTo(main);self.element.on("mouseover","a",function(){var uri=$(this).attr('href');self.element.footer({text:uri});return false;});self.element.on("mouseout","a",function(){self.element.footer({text:""});return false;});self.element.on("mouseout",self.element,function(){self.element.footer({text:""});return false;});$(".topconcepts:first",self.element).topconcepts().bind("selected",function(e,data){$(self.element).trigger("selected",{"uri":data.uri,"label":data.label});return false;});this._refresh();},destroy:function(){var self=this;self.element.removeClass("usw-seneschal-schemedetailscomposite");self.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;$("div.details:first",self.element).schemedetails({schemeURI:self.options.schemeURI});$("div.topconcepts:first",self.element).topconcepts({schemeURI:self.options.schemeURI});}});$(window).load(function(){$(".usw-seneschal-schemedetailscomposite").schemedetailscomposite();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget('seneschal.conceptdetails',{options:{version:"20140619",serviceURI:"http://www.heritagedata.org/live/services/getResource.php",conceptURI:"http://purl.org/heritagedata/schemes/1/concepts/449",useCache:true},_create:function(options){var self=this;self.options=$.extend(self.options,options);$(self.element).addClass("usw-seneschal").addClass("usw-seneschal-conceptdetails").css({"overflow-y":"scroll","text-align":"left"});$("<div class='prefLabels'/>").appendTo(self.element).css({"font-weight":"bold"});$("<div class='altLabels'/>").appendTo(self.element).css({"font-style":"italic","margin-top":"2px"});$("<div class='scopeNotes'/>").appendTo(self.element).css({"margin-top":"2px"});self._refresh();},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.conceptURI===""){return;}
$(self.element).waitable({"waiting":true});$.ajax({type:"GET",url:self.options.serviceURI,data:{uri:self.options.conceptURI},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data,textStatus,jqXHR){var self=this,concept=data[self.options.conceptURI],prefLabels=[],altLabels=[],scopeNotes=[],property,obj1,obj2,key1,value,lang,s;for(property in concept){if(concept.hasOwnProperty(property)){obj1=concept[property];for(key1 in obj1){if(obj1.hasOwnProperty(key1)){obj2=obj1[key1];if(property===usw.uri.skos.PREFLABEL||property===usw.uri.skos.ALTLABEL||property===usw.uri.skos.SCOPENOTE){value=(obj2.value||"");lang=(obj2.lang||"");s=value+((lang==="en"||lang==="")?"":" <small>["+lang+"]</small>");switch(property){case usw.uri.skos.PREFLABEL:prefLabels.push(s);break;case usw.uri.skos.ALTLABEL:altLabels.push(s);break;case usw.uri.skos.SCOPENOTE:scopeNotes.push(s);break;}}}}}}
$("div.prefLabels:first",self.element).html(prefLabels.length===0?"":prefLabels.join("<br>"));$("div.altLabels:first",self.element).html(altLabels.length===0?"":altLabels.join("<br>"));$("div.scopeNotes:first",self.element).html(scopeNotes.length===0?"":scopeNotes.join("<br>"));$(self.element).waitable({"waiting":false});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;alert("error:"+textStatus+" | "+errorThrown);$(self.results).waitable({"waiting":false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({"waiting":false});}});$(window).load(function(){$(".usw-seneschal-conceptdetails").conceptdetails();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.conceptrelations",{options:{useCache:true,serviceURI:"http://www.heritagedata.org/live/services/getconceptrelations",conceptURI:"http://purl.org/heritagedata/schemes/1/concepts/447"},_create:function(options){var self=this;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal");self.element.addClass("usw-seneschal-conceptrelations");self.element.waitable({waiting:false});self.element.css({"min-height":"100px","text-align":"left","overflow-y":"scroll"});self.element.on("click","a",function(){var uri=$(this).attr('href'),label=$(this).text();self.options.conceptURI=uri;$(self.element).trigger("selected",{"uri":uri,"label":label});self._refresh();return false;});this._refresh();},destroy:function(){this.element.remove(this.input);this.element.removeClass("usw-seneschal-conceptrelations");this.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.conceptURI===""){return;}
$(self.element).waitable({"waiting":true});$(self.element).html("");$.ajax({type:"GET",url:self.options.serviceURI,data:{conceptURI:self.options.conceptURI,offset:0,limit:0},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data,textStatus,jqXHR){var self=this,list=$("<ul/>").appendTo(self.element).css({"list-style-type":"none","padding":"0px",margin:"1px"});data.sort(function(a,b){var lblA=$(a).attr("property").toLowerCase()+$(a).attr("label").toLowerCase(),lblB=$(b).attr("property").toLowerCase()+$(b).attr("label").toLowerCase();if(lblA<lblB){return-1;}
if(lblA>lblB){return 1;}
return 0;});$(data).each(function(obj){var property=$(this).attr("property"),uri=$(this).attr("uri"),label=$(this).attr("label")===""?uri:$(this).attr("label"),lang=$(this).attr("label lang"),rel;if(lang==="en"){rel="";switch(property){case usw.uri.skos.BROADER:rel="<abbr title='broader term'>BT</abbr>";break;case usw.uri.skos.NARROWER:rel="<abbr title='narrower term'>NT</abbr>";break;case usw.uri.skos.RELATED:rel="<abbr title='related term'>RT</abbr>";break;}
$("<li>"+rel+" <a href='"+uri+"'>"+label+"</a></li>").appendTo(list);}});$("ul",self.element).css({"list-style-type":"none","padding":"0px","margin-left":"5px"});$(self.element).waitable({"waiting":false});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;$(self.element).waitable({"waiting":false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({"waiting":false});}});$(window).load(function(){$(".usw-seneschal-conceptrelations").conceptrelations();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.conceptdetailscomposite",{options:{conceptURI:"http://purl.org/heritagedata/schemes/mda_obj/concepts/96662",useCache:true,title:"Concept details",displayHeader:true,displayFooter:true},_create:function(options){var self=this,w,h,main;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal").addClass("usw-seneschal-conceptdetailscomposite").waitable({waiting:false}).header({text:self.options.title,visible:self.options.displayHeader}).footer({text:"",visible:self.options.displayFooter}).css({"min-height":"200px"});w=$(self.element).innerWidth();h=$(self.element).innerHeight();main=$("<div></div>").appendTo(self.element).css({position:"relative",width:w,height:h});$("<div class='details'/>").conceptdetails({useCache:self.options.useCache}).appendTo(main).css({position:"absolute","overflow-y":"scroll",left:(w/100),top:(h/100),width:(w/100)*98,height:(h/100)*48});$("<div class='relations'/>").conceptrelations({useCache:self.options.useCache}).appendTo(main).css({position:"absolute","overflow-y":"scroll",left:(w/100),top:(h/100)*50,width:(w/100)*98,height:(h/100)*48});self.element.on("click","a",function(){var uri=$(this).attr('href'),label=$(this).text();self.options.conceptURI=uri;self._refresh();$(self.element).trigger("selected",{"uri":uri,"label":label});return false;});self.element.on("mouseover","a",function(){var uri=$(this).attr('href');self.element.footer({text:uri});return false;});self.element.on("mouseout","a",function(){self.element.footer({text:""});return false;});self.element.on("mouseout",self.element,function(){self.element.footer({text:""});return false;});$(".relations:first",self.element).conceptrelations().bind("selected",function(e,data){self.options.conceptURI=data.uri;self._refresh();$(self.element).trigger("selected",{"uri":data.uri,"label":data.label});return false;});this._refresh();},_destroy:function(){var self=this;self.element.html("");self.element.removeClass("usw-seneschal-conceptdetailscomposite");self.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;$("div.relations:first",self.element).conceptrelations({conceptURI:self.options.conceptURI});$("div.details:first",self.element).conceptdetails({conceptURI:self.options.conceptURI});}});$(window).load(function(){$(".usw-seneschal-conceptdetailscomposite").conceptdetailscomposite();});}(jQuery));(function($){"use strict";$.support.cors=true;$.widget("seneschal.termsearch",{options:{placeholder:"Search for...",title:"Concept search",useCache:true,schemeURI:"http://purl.org/heritagedata/schemes/mda_obj",startsWith:"",contains:"",limit:0,offset:0,serviceURI:"http://www.heritagedata.org/live/services/getConceptLabelMatch.php"},_create:function(options){var self=this,w,h,formElement,searchElement;self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal").addClass("usw-seneschal-termsearch").waitable({"waiting":false}).header({"text":self.options.title}).footer({"text":"0 results"}).css({"min-height":"150px"});w=self.element.innerWidth();h=self.element.innerHeight();formElement=$("<form/>").appendTo(self.element);$("<select><option value='startswith' selected>Starts With</option><option value='contains'>Contains</option></select>").appendTo(formElement).css({cursor:"pointer",width:w/100*25});searchElement=$("<input type='search' />").attr("placeholder",self.options.placeholder).attr("autocomplete","on").attr("results",5).appendTo(formElement).css({"margin-left":"2px",width:w/100*60,border:"1px solid lightgray"});$("<input type='submit'/>").attr("value","go").appendTo(formElement).css({width:w/100*10,"margin-left":"2px","text-align":"center"});self.results=$("<div class='results'></div>").appendTo(self.element).css({width:w,height:h-$("form:first",self.element).outerHeight(),"text-align":"left","overflow-y":"scroll"});$("form",self.element).submit(function(){var startsWith=($("form select option:selected",self.element).val()==='startswith'),searchText=$(searchElement).val().trim();if(searchText!==self.options.placeholder&&searchText!=="")
{if(startsWith){self.options.contains="";self._setOption("startsWith",searchText);}
else{self.options.startsWith="";self._setOption("contains",searchText);}
$(self.element).trigger('searchRequest',{"searchFor":searchText,"startsWith":startsWith});return false;}});self.results.on("click","a",function(){var uri=$(this).attr('href'),label=$(this).text();$(self.element).trigger("selected",{"uri":uri,"label":label});return false;});self.element.on("mouseover","a",function(){var uri=$(this).attr('href');self.element.footer({text:uri});return false;});self.element.on("mouseout","a",function(){var count=$("div.results ul li",self.element).length;self.element.footer({text:count+" results"});return false;});self.element.on("mouseout",self.element,function(){var count=$("div.results ul li",self.element).length;self.element.footer({text:count+" results"});return false;});},destroy:function(){var self=this;self.element.removeClass("usw-seneschal-termsearch");self.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.startsWith===""&&self.options.contains===""){return;}
$(self.element).waitable({"waiting":true});$(self.results).html("");$(self.element).footer({"text":"Searching..."});$.ajax({type:"GET",url:self.options.serviceURI,data:{schemeURI:self.options.schemeURI,startsWith:self.options.startsWith,contains:self.options.contains,offset:self.options.offset,limit:self.options.limit},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data,textStatus,jqXHR){var self=this,searchText=self.options.startsWith.length>0?self.options.startsWith:self.options.contains,list=$("<ul></ul>").appendTo(self.results).css({"list-style-type":"none",margin:"2px",padding:"2px"});data.sort(function(a,b){var lblA=$(a).attr("label"),lblB=$(b).attr("label");if(lblA<lblB){return-1;}
if(lblA>lblB){return 1;}
return 0;});$(data).each(function(index,obj){var uri=$(this).attr("uri"),label=$(this).attr("label")===""?uri:$(this).attr("label"),lang=$(this).attr("label lang"),regex,txt;RegExp.escape=function(str){return str.replace(/[.*+?|()\[\]{}\\$^]/g,"\\$&");}
regex=new RegExp("("+RegExp.escape(searchText)+")","gi");label=label.replace(regex,"<mark>$1</mark>");txt=((lang==="en"||lang==="")?label:label+" <small>["+lang+"]</small>");$("<li><a href='"+uri+"'>"+txt+"</a></li>").appendTo(list);});$(self.element).waitable({"waiting":false});$(self.element).footer({"text":data.length+" results"});},updateError:function(jqXHR,textStatus,errorThrown){var self=this;$(self.element).waitable({"waiting":false});},updateComplete:function(jqXHR,textStatus){var self=this;$(self.element).waitable({"waiting":false});}});$(window).load(function(){$(".usw-seneschal-termsearch").termsearch();});})(jQuery);(function($){"use strict";$.support.cors=true;$.widget("seneschal.termsuggest",{options:{searchFor:"",useCache:true,schemeURI:"http://purl.org/heritagedata/schemes/mda_obj",serviceURI:"http://www.heritagedata.org/live/services/getConceptLabelMatch",limit:10,minLength:3},_create:function(options){var self=this,w=self.element.innerWidth(),h=self.element.innerHeight();self.options=$.extend(self.options,options);self.element.addClass("usw-seneschal-termsuggest").keyup(function(){self._setOption("searchFor",$.trim($(this).val()));});self.results=$("<div class='results'/>").addClass("usw-seneschal").insertAfter(self.element).css({position:"absolute",left:self.element.position().left,top:self.element.position().top+self.element.outerHeight(),width:self.element.innerWidth(),height:"100px","text-align":"left","overflow-y":"scroll"}).hide();$(self.results).on("click","a",function(){var uri=$(this).attr('href'),label=$(this).text();$(self.element).trigger("selected",{"uri":uri,"label":label});$(self.element).val(label);$(self.results).hide();return false;});$(self.results).focusout(function(){$(this).hide();})},destroy:function(){var self=this;self.element.removeClass("usw-seneschal-termsearch");self.element.removeClass("usw-seneschal");},_setOption:function(key,value){var self=this;key=$.trim(key||'');value=$.trim(value||'');if(value===self.options[key]){return;}
self.options[key]=value;self._refresh();},_refresh:function(){var self=this;if(self.options.searchFor.length<self.options.minLength){$(self.results).html("").hide();return;}
$.ajax({type:"GET",url:self.options.serviceURI,data:{schemeURI:self.options.schemeURI,startsWith:self.options.searchFor,offset:0,limit:self.options.limit},contentType:"application/javascript",cache:self.options.useCache,dataType:"jsonp",context:self,crossDomain:true,success:self.updateSuccess,error:self.updateError,complete:self.updateComplete});},updateSuccess:function(data,textStatus,jqXHR){var self=this;$(self.results).html("");var list=$("<ul></ul>").appendTo(self.results).css({"list-style-type":"none",margin:"2px",padding:"2px"});data.sort(function(a,b){var lblA=$(a).attr("label"),lblB=$(b).attr("label");if(lblA<lblB){return-1;}
if(lblA>lblB){return 1;}
return 0;});$(data).each(function(index,obj){var uri=$(this).attr("uri"),label=$(this).attr("label")===""?uri:$(this).attr("label"),lang=$(this).attr("label lang"),regex,txt;txt=((lang==="en"||lang==="")?label:label+" <small>["+lang+"]</small>");$("<li><a href='"+uri+"'>"+txt+"</a></li>").appendTo(list);});self.results.show();},updateError:function(jqXHR,textStatus,errorThrown){self.results.hide();},updateComplete:function(jqXHR,textStatus){}});$(window).load(function(){$("input.usw-seneschal-termsuggest").termsuggest();});})(jQuery);